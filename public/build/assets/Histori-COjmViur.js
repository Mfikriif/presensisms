import{r as n,j as e,M as j,b as w}from"./app-DeBNW46r.js";import{M as y}from"./MainLayout-lXbdEPjc.js";import k from"./GetHistori-CWLQI2jo.js";import{D as v,k as h}from"./index-CgHDbfex.js";function D({namabulan:m=[],tahun_awal:c=2022}){const d=new Date,b=d.getMonth()+1,u=d.getFullYear(),[r,g]=n.useState(b),[o,f]=n.useState(u),[s,t]=n.useState(""),[l,x]=n.useState(!1),p=async()=>{if(!r||!o){t("Pilih bulan dan tahun terlebih dahulu.");return}x(!0);try{const a=await w.post("/gethistori",{bulan:r,tahun:o});a.data.length===0?t("Tidak ada data untuk bulan dan tahun ini."):(t(a.data),h.success("Data berhasil ditampilkan!"))}catch(a){console.error("Error saat mengambil data:",a),t("Terjadi kesalahan saat mengambil data."),h.error("Gagal mengambil data. Silakan coba lagi.")}finally{x(!1)}};return e.jsxs(y,{children:[e.jsx(j,{title:"Histori Absensi | E-Presensi SMS"}),e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-100",children:[e.jsx(v,{position:"top-center",reverseOrder:!1}),e.jsxs("div",{className:"bg-blue-950 text-white flex items-center justify-between px-4 py-3 shadow-md",children:[e.jsxs("button",{onClick:()=>window.location.href="/dashboardop",className:"flex items-center text-white",children:[e.jsx("ion-icon",{name:"chevron-back-outline",className:"text-2xl"}),e.jsx("span",{className:"ml-2 text-sm",children:"Kembali"})]}),e.jsx("h1",{className:"text-lg font-semibold",children:"Histori Presensi"})]}),e.jsxs("div",{className:"flex-grow flex flex-col",children:[e.jsxs("div",{className:"p-6 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bulan",className:"block text-base font-semibold text-gray-800",children:"Bulan"}),e.jsxs("select",{id:"bulan",className:"mt-2 block w-full min-w-[150px] rounded-xl border-gray-300 shadow-md text-base p-3 bg-white focus:border-blue-600 focus:ring focus:ring-blue-300",value:r,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Bulan"}),m.map((a,i)=>e.jsx("option",{value:i+1,children:a},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tahun",className:"block text-base font-semibold text-gray-800",children:"Tahun"}),e.jsxs("select",{id:"tahun",className:"mt-2 block w-full min-w-[150px] rounded-xl border-gray-300 shadow-md text-base p-3 bg-white focus:border-blue-600 focus:ring focus:ring-blue-300",value:o,onChange:a=>f(a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Tahun"}),Array.from({length:u-c+1},(a,i)=>c+i).map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsx("button",{onClick:p,disabled:l,className:`mt-6 w-full px-5 py-3 text-white text-base font-semibold rounded-xl shadow-md ${l?"bg-gray-400":"bg-blue-950"} focus:ring focus:ring-blue-300`,children:l?"Memuat...":"Cari Data"})]}),e.jsx("div",{className:"flex-grow overflow-y-auto px-4 pb-28",children:l?e.jsx("p",{className:"text-gray-500 text-sm italic text-center",children:"Memuat data..."}):Array.isArray(s)&&s.length>0?e.jsx(k,{histori:s}):e.jsx("p",{className:"text-gray-500 text-sm italic text-center",children:typeof s=="string"?s:"Tidak ada data yang ditampilkan."})})]})]})]})}export{D as default};
