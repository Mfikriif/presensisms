import{r as f,V as N,a as y,j as e,M as v,U as w,u as r}from"./app-B8c1BTdD.js";import{M as _}from"./Modal-DHwNQTD_.js";import{A as k}from"./AuthenticatedLayout-CudRRKXl.js";import{T as C}from"./triangle-alert-DXUzOiz8.js";import"./transition-BnVXVUAU.js";import"./ApplicationLogo-CV_Zqwon.js";function A({pegawai:a,userRole:E}){const[m,o]=f.useState(!1),h=()=>o(!0),n=()=>o(!1),{auth:d}=N().props;console.log(d.user.role);const{data:i,setData:l,put:x,delete:p,errors:t,processing:g}=y({nama_lengkap:a.nama_lengkap,posisi:a.posisi,email:a.email,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,no_hp:a.no_hp});function u(s){s.preventDefault(),x(route("pegawai.update",{pegawai:a.id}),{onSuccess:()=>{l({nama_lengkap:"",email:"",posisi:"",no_hp:"",foto:null,tempat_lahir:"",tanggal_lahir:""}),n(),r.success("Data pegawai berhasil di perbarui")}})}function j(s){s.preventDefault(),r(c=>e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 p-4 bg-red-100 border border-red-400 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"text-red-600 w-20 h-20"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:"Apakah Anda yakin ingin menghapus data ini?"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>b(c),className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700",children:"OK"}),e.jsx("button",{onClick:()=>r.dismiss(c),className:"px-4 py-2 text-red-600 bg-red-200 rounded-lg hover:bg-red-300",children:"Batal"})]})]}),{duration:1/0})}function b(s){p(route("pegawai.destroy",{pegawai:a.id}),{onSuccess:()=>{r.dismiss(s),r.success("Pegawai berhasil dihapus")},onError:()=>{r.dismiss(s),r.error("Terjadi kesalahan saat menghapus data")}})}return e.jsx(e.Fragment,{children:e.jsx(k,{header:e.jsx(e.Fragment,{children:"Edit Pegawai"}),children:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg",children:[e.jsx(v,{title:"Edit Pegawai"}),e.jsxs("div",{className:"max-w-5xl p-10",children:[e.jsx("div",{className:"w-20 h-20 overflow-hidden ml-10",children:e.jsx("img",{src:`/storage/${a.foto}`,alt:"foto-pegawai"})}),e.jsx("div",{className:"p-6",children:e.jsx("table",{className:"table-auto w-full border-collapse",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"ID Pegawai"}),e.jsx("td",{className:" px-6 py-4 text-gray-800",children:a.id})]}),e.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"Nama"}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.nama_lengkap})]}),e.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"posisi"}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.posisi})]}),e.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"email"}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.email})]}),e.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"Tempat Lahir"}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.tempat_lahir})]}),e.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"Tanggal Lahir"}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.tanggal_lahir})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("th",{className:"text-left px-6 py-4 font-medium text-gray-600",children:"No Telepon"}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.no_hp})]})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{className:"bg-blue-900 hover:bg-blue-950 text-white px-5 py-1 rounded ml-10",onClick:h,children:"Edit"}),e.jsx("form",{action:"",onSubmit:j,children:e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-5 py-1 rounded ml-4",children:"Hapus"})}),d.user.role=="superadmin"?e.jsx(w,{href:route("userrole.edit",{id:a.id}),className:"bg-green-600 hover:bg-green-700 text-white px-5 py-1 rounded ml-4",children:"Edit User"}):e.jsx("span",{})]}),e.jsx(_,{show:m,maxWidth:"2xl",closeable:!0,onClose:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-2xl font-bold",children:"Edit Data Pegawai"}),e.jsx("div",{className:"text-sm",children:e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Nama:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Nama Lengkap",value:i.nama_lengkap,onChange:s=>l("nama_lengkap",s.target.value)})]}),t.nama_lengkap&&e.jsx("p",{className:"error ml-12",children:t.nama_lengkap}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"email:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"email",value:i.email,onChange:s=>l("email",s.target.value)})]}),t.email&&e.jsx("p",{className:"error ml-12",children:t.email}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"posisi:"}),e.jsxs("select",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",value:i.posisi,onChange:s=>l("posisi",s.target.value),children:[e.jsx("option",{value:"",children:"Pilih Jabatan"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"cleaning service",children:"Cleaning Service"}),e.jsx("option",{value:"security",children:"Security"})]})]}),t.posisi&&e.jsx("p",{className:"error ml-12",children:t.posisi}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"No HP:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Nomor Hand Phone",value:i.no_hp,onChange:s=>l("no_hp",s.target.value)})]}),t.No_Hp&&e.jsx("p",{className:"error ml-12",children:t.no_hp}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Foto:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"file",onChange:s=>l("foto",s.target.files[0])})]}),t.Foto&&e.jsx("p",{className:"error ml-12",children:t.foto}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Tempat Lahir:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Tempat Lahir",value:i.tempat_lahir,onChange:s=>l("tempat_lahir",s.target.value)})]}),t.tempat_lahir&&e.jsx("p",{className:"error ml-24",children:t.tempat_lahir}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Tanggal Lahir:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Tahun-Bulan-Tanggal",value:i.tanggal_lahir,onChange:s=>l("tanggal_lahir",s.target.value)})]}),t.tanggal_lahir&&e.jsx("p",{className:"error ml-24",children:t.tanggal_lahir}),e.jsx("button",{className:"mt-6 ml-48 bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-950",disabled:g,children:"Simpan Perubahan"})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",onClick:n,children:"Batalkan"})})]})})]})]})})})})}export{A as default};
