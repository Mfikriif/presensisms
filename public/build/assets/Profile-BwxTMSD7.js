import{r as l,j as e,M as g}from"./app-CLtBnBoM.js";import{M as j}from"./MainLayout-D61vvNB0.js";import{S as o}from"./sweetalert2.esm.all-BkU8I-GU.js";import{d as y}from"./index-CKNNAASc.js";function _({pegawai:t,successMessage:r,errorMessage:n,errors:s}){const[i,u]=l.useState(t.nama_lengkap||""),[m,p]=l.useState(t.no_hp||""),[c,h]=l.useState(""),[d,f]=l.useState(!1);l.useEffect(()=>{if(r&&o.fire({icon:"success",title:"Berhasil",text:r,timer:3e3,showConfirmButton:!1,timerProgressBar:!0}),n&&o.fire({icon:"error",title:"Gagal",text:n,timer:3e3,showConfirmButton:!1,timerProgressBar:!0}),s&&Object.keys(s).length>0){const a=Object.values(s).join(`
`);o.fire({icon:"error",title:"Validasi Gagal",text:a,confirmButtonText:"Tutup"})}},[r,n,s]);const x=a=>{if(a.preventDefault(),i===t.nama_lengkap&&m===t.no_hp&&!c){o.fire({icon:"info",title:"Tidak Ada Perubahan",text:"Data tidak ada yang diubah.",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,customClass:{popup:"custom-swal-popup",title:"custom-swal-title",content:"custom-swal-content"}});return}o.fire({title:"Apakah Anda Yakin?",text:"Perubahan akan disimpan.",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Simpan",cancelButtonText:"Batal",customClass:{popup:"custom-swal-popup",title:"custom-swal-title",content:"custom-swal-content",confirmButton:"custom-swal-confirm",cancelButton:"custom-swal-cancel"}}).then(b=>{b.isConfirmed&&y.Inertia.visit(`/presensi/${t.id}/updateprofile`,{method:"post",data:{nama_lengkap:i,no_hp:m,password:c},only:["pegawai"],replace:!0,preserveState:!0})})};return e.jsxs(j,{children:[e.jsx(g,{title:"Login | E-Presensi SMS"}),e.jsxs("div",{className:"bg-gray-100 min-h-screen overflow-y-auto pb-52",children:[e.jsxs("div",{className:"bg-blue-950 text-white flex items-center justify-between px-4 py-3 shadow-md",children:[e.jsxs("button",{onClick:()=>window.location.href="/dashboardop",className:"flex items-center text-white",children:[e.jsx("ion-icon",{name:"chevron-back-outline",className:"text-2xl"}),e.jsx("span",{className:"ml-2 text-sm",children:"Kembali"})]}),e.jsx("h1",{className:"text-lg font-semibold",children:"Ubah Profil"})]}),e.jsxs("form",{action:`/presensi/${t.id}/updateprofile`,method:"POST",onSubmit:x,className:"mt-6 px-4 flex-grow",children:[e.jsx("input",{type:"hidden",name:"_token",value:document.querySelector('meta[name="csrf-token"]').content}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex justify-center items-center mt-2",children:e.jsx("div",{className:"relative w-28 h-28",children:e.jsx("img",{src:t.foto?`/storage/${t.foto}`:"/assets/img/sample/avatar/avatar1.jpg",alt:"Foto Profil",className:"w-full h-full rounded-full border-4 border-blue-950 shadow-lg object-cover"})})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nama_lengkap",className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("input",{type:"text",id:"nama_lengkap",name:"nama_lengkap",className:`mt-1 block w-full rounded-lg border shadow ${s.nama_lengkap?"border-red-500":"border-gray-300"} focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50`,placeholder:"Nama Lengkap",autoComplete:"off",value:i,onChange:a=>u(a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"mt-1 block w-full rounded-lg border-gray-300 shadow bg-gray-200 cursor-not-allowed",value:t.email,disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"posisi",className:"block text-sm font-medium text-gray-700",children:"Posisi"}),e.jsx("input",{type:"text",id:"posisi",name:"posisi",className:"mt-1 block w-full rounded-lg border-gray-300 shadow bg-gray-200 cursor-not-allowed",value:t.posisi?t.posisi.charAt(0).toUpperCase()+t.posisi.slice(1):"",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"no_hp",className:"block text-sm font-medium text-gray-700",children:"No. HP"}),e.jsx("input",{type:"text",id:"no_hp",name:"no_hp",className:`mt-1 block w-full rounded-lg border shadow ${s.no_hp?"border-red-500":"border-gray-300"} focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50`,placeholder:"No. HP",autoComplete:"off",value:m,onChange:a=>p(a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"tempat_lahir",className:"block text-sm font-medium text-gray-700",children:"Tempat Lahir"}),e.jsx("input",{type:"text",id:"tempat_lahir",name:"tempat_lahir",className:"mt-1 block w-full rounded-lg border-gray-300 shadow bg-gray-200 cursor-not-allowed",value:t.tempat_lahir||"",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"tanggal_lahir",className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),e.jsx("input",{type:"date",id:"tanggal_lahir",name:"tanggal_lahir",className:"mt-1 block w-full rounded-lg border-gray-300 shadow bg-gray-200 cursor-not-allowed",value:t.tanggal_lahir||"",disabled:!0})]}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:d?"text":"password",id:"password",name:"password",className:`mt-1 block w-full rounded-lg border shadow ${s.password?"border-red-500":"border-gray-300"} focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 pr-10`,placeholder:"Password",autoComplete:"off",value:c,onChange:a=>h(a.target.value)}),e.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-9 text-gray-600 hover:text-gray-900",children:e.jsx("ion-icon",{name:d?"eye-off-outline":"eye-outline",className:"text-xl"})})]}),e.jsx("div",{children:e.jsxs("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-blue-950 rounded-lg shadow hover:bg-blue-900 focus:ring focus:ring-blue-200 focus:ring-opacity-50 flex items-center justify-center gap-2",children:[e.jsx("ion-icon",{name:"refresh-outline",className:"text-lg"}),e.jsx("span",{children:"Ubah"})]})})]})]})]})}export{_ as default};
