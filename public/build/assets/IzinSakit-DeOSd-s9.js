import{r as i,j as e,b as u,u as m}from"./app-BaOtK62B.js";import{A as g}from"./AuthenticatedLayout-T3d-YeVZ.js";import"./ApplicationLogo-DjIJYlGS.js";import"./transition-CG9yAGt5.js";function N({dataIzinSakit:o}){const[a,p]=i.useState(""),[d,c]=i.useState(!0),x=()=>new Date().toISOString().split("T")[0],h=o.filter(s=>{var t;const r=(t=s.created_at)==null?void 0:t.split("T")[0],l=s.tanggal_izin.toLowerCase().includes(a.toLowerCase())||s.namaPengaju.toLowerCase().includes(a.toLowerCase());return d?r===x():l}),n=async(s,r)=>{const l=u.post(route("izin.update",s),{status_approved:r});m.promise(l,{loading:"Sedang memproses...",success:t=>(setTimeout(()=>{window.location.reload()},2e3),"Status perizinan berhasil diperbarui!"),error:t=>(console.error("Error:",t),"Terjadi kesalahan saat memperbarui status.")})};return e.jsx(e.Fragment,{children:e.jsx(g,{header:e.jsx(e.Fragment,{children:"Izin / Sakit"}),children:e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"pl-10 pr-4 py-2 my-4 border rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 w-2/6",type:"text",placeholder:"Cari berdasarkan nama atau tanggal izin",value:a,onChange:s=>{p(s.target.value),c(s.target.value==="")}}),e.jsxs("table",{className:"p-6 bg-white shadow-2xl rounded-2xl w-full border-collapse text-center",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"No"}),e.jsx("th",{className:"px-4 py-2",children:"Nama"}),e.jsx("th",{className:"px-2 py-2 ",children:"Tanggal Izin / Sakit"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Status"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Keterangan"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Status Approved"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Bukti Surat"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Aksi"})]})}),e.jsx("tbody",{children:h.map((s,r)=>e.jsxs("tr",{className:"even:bg-gray-50 border-b border-gray-300",children:[e.jsx("td",{className:"px-4 py-2 text-center",children:r+1}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:s.namaPengaju}),e.jsx("td",{className:"px-2 py-2",children:s.tanggal_izin}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:s.status=="i"?e.jsx("span",{className:"bg-yellow-200 px-4 py-1 text-yellow-600 font-semibold rounded-lg",children:"Izin"}):e.jsx("span",{className:"bg-red-300 px-4 py-1 text-red-600 font-semibold rounded-lg",children:"Sakit"})}),e.jsx("td",{className:"px-4 py-2",children:s.keterangan}),e.jsx("td",{className:"px-4 py-2 ",children:s.status_approved?s.status_approved==0?e.jsx("span",{className:"bg-orange-300 px-4 py-1 rounded-lg text-orange-600 font-semibold",children:"pending"}):s.status_approved==1?e.jsx("span",{className:"bg-green-200 px-4 py-1 rounded-lg text-green-600 font-semibold",children:"Disetujui"}):e.jsx("span",{className:"bg-red-200 px-4 py-1 rounded-lg text-red-600 font-semibold",children:"Ditolak"}):e.jsx("span",{className:"bg-red-300 px-4 py-1 rounded-lg text-red-600 font-semibold",children:"Ditolak"})}),e.jsx("td",{children:s.file_path?e.jsx("a",{className:"bg-blue-800 text-white px-3 py-1 rounded-lg hover:bg-blue-900",href:route("izin.showfile",s.id),children:"Download"}):e.jsx("span",{})}),e.jsx("td",{className:"px-4 py-2 flex justify-center",children:s.status_approved==="1"||s.status_approved==="2"?e.jsx("button",{onClick:()=>n(s.id,"0"),className:"bg-red-500 px-4 py-1 text-white rounded-lg hover:bg-red-700",children:"Cancel"}):e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>n(s.id,"1"),className:"bg-green-500 px-4 py-1 text-white rounded-lg hover:bg-green-700 mr-2",children:["Setujui"," "]}),e.jsx("button",{onClick:()=>n(s.id,"2"),className:"bg-red-500 px-4 py-1 text-white rounded-lg hover:bg-red-700",children:"Tolak"})]})})]},s.id))})]})]})})})}export{N as default};
