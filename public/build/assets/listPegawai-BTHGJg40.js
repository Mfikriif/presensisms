import{r as m,a as L,j as e,M as T,U as j,u as t}from"./app-ar4AfqUK.js";import{A as M,I as F}from"./AuthenticatedLayout-BsKwNBJo.js";import{R as D}from"./react-paginate-C6mCEIV0.js";import{M as A}from"./Modal-Ck5wKc7R.js";import{F as E,a as H}from"./index-8F-QF7yG.js";import{a as B}from"./index-_0S9O7qf.js";import{T as I}from"./triangle-alert-BUFjAvq4.js";import"./ApplicationLogo-HMSJFoEc.js";import"./transition-D8mv830T.js";function G({pegawai:x}){const[n,b]=m.useState(""),[c,h]=m.useState(0),i=10,{data:r,setData:l,post:f,delete:N,errors:s,processing:y}=L({nama_lengkap:"",email:"",posisi:"",no_hp:"",foto:null,tempat_lahir:"",tanggal_lahir:""}),[v,p]=m.useState(!1),w=()=>p(!0),d=()=>p(!1),g=x.filter(a=>a.nama_lengkap.toLowerCase().includes(n.toLowerCase())||a.email.toLowerCase().includes(n.toLowerCase())||a.posisi.toLowerCase().includes(n.toLowerCase())),C=Math.ceil(g.length/i),u=g.slice(c*i,(c+1)*i),k=({selected:a})=>{h(a)};function _(a){a.preventDefault(),f(route("pegawai.store"),{onSuccess:()=>{l({nama_lengkap:"",email:"",posisi:"",no_hp:"",foto:null,tempat_lahir:"",tanggal_lahir:""}),d(),t.success("Pegawai baru berhasil di tambahkan")}})}function P(a){N(route("pegawai.destroy",x),{onSuccess:()=>{t.dismiss(a),t.success("Pegawai berhasil dihapus")},onError:()=>{t.dismiss(a),t.error("Terjadi kesalahan saat menghapus data")}})}function S(a){a.preventDefault(),t(o=>e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 p-4 bg-red-100 border border-red-400 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"text-red-600 w-20 h-20"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:"Apakah Anda yakin ingin menghapus data ini?"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>P(o),className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700",children:"OK"}),e.jsx("button",{onClick:()=>t.dismiss(o),className:"px-4 py-2 text-red-600 bg-red-200 rounded-lg hover:bg-red-300",children:"Batal"})]})]}),{duration:1/0})}return e.jsx(e.Fragment,{children:e.jsx(M,{header:e.jsx(e.Fragment,{children:"Daftar Pegawai"}),children:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 p-6 rounded-2xl",children:[e.jsx(T,{title:"List Pegawai"}),e.jsxs("div",{className:"flex p-6 justify-between",children:[e.jsxs("button",{className:"bg-blue-950 text-white my-auto py-2 px-4 rounded-lg flex text-sm",onClick:w,children:[e.jsx(E,{className:"my-auto mr-2"}),"Tambah Pegawai"]}),e.jsx("input",{type:"text",placeholder:"Cari pegawai...",className:"border border-gray-300 rounded-2xl p-2 w-full sm:w-1/3",value:n,onChange:a=>{b(a.target.value),h(0)}})]}),e.jsxs("div",{className:"mx-auto border rounded-2xl shadow-2xl",children:[e.jsx("div",{className:"mb-6 flex justify-between",children:e.jsx(A,{show:v,maxWidth:"2xl",closeable:!0,onClose:d,children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-2xl font-bold",children:"Tambah Pegawai"}),e.jsx("div",{className:"text-sm",children:e.jsxs("form",{onSubmit:_,encType:"multipart/form-data",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Nama:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Nama Lengkap",value:r.nama_lengkap,onChange:a=>l("nama_lengkap",a.target.value)})]}),s.nama_lengkap&&e.jsx("p",{className:"error ml-12",children:s.nama_lengkap}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Email:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"email",value:r.email,onChange:a=>l("email",a.target.value)})]}),s.email&&e.jsx("p",{className:"error ml-12",children:s.email}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Jabatan:"}),e.jsxs("select",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",value:r.posisi,onChange:a=>l("posisi",a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Jabatan"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"Cleaning Service",children:"Cleaning Service"}),e.jsx("option",{value:"Security",children:"Security"})]})]}),s.posisi&&e.jsx("p",{className:"error ml-12",children:s.posisi}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"No HP:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Nomor Hand Phone",value:r.no_hp,onChange:a=>l("no_hp",a.target.value)})]}),s.no_hp&&e.jsx("p",{className:"error ml-12",children:s.no_hp}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Foto:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"file",onChange:a=>l("foto",a.target.files[0])})]}),s.foto&&e.jsx("p",{className:"error ml-12",children:s.foto}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Tempat Lahir:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Tempat Lahir",value:r.tempat_lahir,onChange:a=>l("tempat_lahir",a.target.value)})]}),s.tempat_lahir&&e.jsx("p",{className:"error ml-24",children:s.tempat_lahir}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"my-auto",children:"Tanggal Lahir:"}),e.jsx("input",{className:"ml-2 block w-full mt-3 rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white",type:"text",placeholder:"Tahun-Bulan-Tanggal",value:r.tanggal_lahir,onChange:a=>l("tanggal_lahir",a.target.value)})]}),s.tanggal_lahir&&e.jsx("p",{className:"error ml-24",children:s.tanggal_lahir}),e.jsx("button",{className:"mt-6 ml-48 bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-950",disabled:y,children:"Simpan"})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",onClick:d,children:"Batalkan"})})]})})}),e.jsxs("table",{className:"w-full border-collapse text-left mb-3",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"No"}),e.jsx("th",{className:"px-4 py-2",children:"Nama"}),e.jsx("th",{className:"px-4 py-2",children:"Email"}),e.jsx("th",{className:"px-4 py-2",children:"Jabatan"}),e.jsx("th",{className:"px-4 py-2",children:"No Hp"}),e.jsx("th",{className:"px-4 py-2",children:"Foto"}),e.jsx("th",{className:"px-4 py-2",children:"Aksi"})]})}),e.jsx("tbody",{children:u.length>0?u.map((a,o)=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-50 hover:bg-gray-100 border-b border-gray-300",children:[e.jsx("td",{className:"px-4 py-2 text-center",children:c*i+o+1}),e.jsx("td",{className:"px-4 py-2",children:a.nama_lengkap}),e.jsx("td",{className:"px-4 py-2",children:a.email}),e.jsx("td",{className:"px-4 py-2",children:a.posisi}),e.jsx("td",{className:"px-4 py-2",children:a.no_hp}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("img",{src:a.foto?`/storage/${a.foto}`:"/assets/img/nophoto.png",alt:"foto Pegawai",className:"w-12 h-12 object-cover rounded-md"})}),e.jsx("td",{className:" text-center",children:e.jsxs("div",{className:"flex justify-evenly",children:[e.jsx(j,{href:route("pegawai.edit",a),children:e.jsx("div",{className:"bg-green-300 p-1 rounded-lg text-green-600  items-center",children:e.jsx(H,{className:"h-5 w-5"})})}),e.jsx(j,{href:route("konfigurasi.show",a),children:e.jsx("div",{className:"bg-blue-300 p-1 rounded-lg text-blue-600  items-center",children:e.jsx(F,{className:"h-5 w-5 "})})}),e.jsx("button",{onClick:S,children:e.jsx("div",{className:"bg-red-300 p-1 rounded-lg text-red-600  items-center",children:e.jsx(B,{className:"text-xl "})})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center text-gray-500 py-4",children:"Tidak ada pegawai yang cocok dengan pencarian"})})})]})]}),e.jsx("div",{className:"my-6 ",children:e.jsx(D,{previousLabel:"← Sebelumnya",nextLabel:"Selanjutnya →",pageCount:C,onPageChange:k,containerClassName:"flex justify-center space-x-2",pageClassName:"px-4 py-2",previousClassName:"px-4 py-2",nextClassName:"px-4 py-2",activeClassName:"bg-blue-500 text-white font-bold"})})]})})})})}export{G as default};
