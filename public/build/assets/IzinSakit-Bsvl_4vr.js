import{r as d,j as e,b as u,u as h}from"./app-BXah4JEC.js";import{A as g}from"./AuthenticatedLayout-CuJPAzTV.js";import"./ApplicationLogo-ErxAcPVl.js";import"./transition-CuP37XH4.js";function w({dataIzinSakit:p}){const[l,c]=d.useState(""),[t,n]=d.useState("pending"),x=p.filter(s=>{const a=s.status_approved,o=s.tanggal_izin.toLowerCase().includes(l.toLowerCase())||s.namaPengaju.toLowerCase().includes(l.toLowerCase());let r=!1;return t==="pending"?r=a==="0"||a===null:t==="approved"?r=a==="1":t==="rejected"?r=a==="2":r=!0,o&&r}),i=async(s,a)=>{const o=u.post(route("izin.update",s),{status_approved:a});h.promise(o,{loading:"Sedang memproses...",success:r=>(setTimeout(()=>{window.location.reload()},2e3),"Status perizinan berhasil diperbarui!"),error:r=>(console.error("Error:",r),"Terjadi kesalahan saat memperbarui status.")})};return e.jsx(e.Fragment,{children:e.jsx(g,{header:e.jsx(e.Fragment,{children:"Izin / Sakit"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("input",{className:"pl-10 pr-4 py-2 my-4 border rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 w-2/6",type:"text",placeholder:"Cari berdasarkan nama atau tanggal izin",value:l,onChange:s=>{c(s.target.value),setToday(s.target.value==="")}}),e.jsxs("div",{className:"flex gap-2 mb-4 font-semibold",children:[e.jsx("button",{onClick:()=>n("pending"),className:`px-4 py-2 rounded-lg ${t==="pending"?"bg-orange-500 text-white":"bg-gray-200"}`,children:"Pending"}),e.jsx("button",{onClick:()=>n("approved"),className:`px-4 py-2 rounded-lg ${t==="approved"?"bg-green-500 text-white":"bg-gray-200"}`,children:"Disetujui"}),e.jsx("button",{onClick:()=>n("rejected"),className:`px-4 py-2 rounded-lg ${t==="rejected"?"bg-red-500 text-white":"bg-gray-200"}`,children:"Ditolak"}),e.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg ${t==="all"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Semua"})]})]}),e.jsxs("table",{className:"p-6 bg-white shadow-2xl rounded-2xl w-full border-collapse text-center",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"No"}),e.jsx("th",{className:"px-4 py-2",children:"Nama"}),e.jsx("th",{className:"px-2 py-2 ",children:"Tanggal Izin / Sakit"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Status"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Keterangan"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Status Approved"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Bukti Surat"}),e.jsx("th",{className:"px-4 py-2 whitespace-nowrap",children:"Aksi"})]})}),e.jsx("tbody",{children:x.map((s,a)=>e.jsxs("tr",{className:"even:bg-gray-50 border-b border-gray-300",children:[e.jsx("td",{className:"px-4 py-2 text-center",children:a+1}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:s.namaPengaju}),e.jsx("td",{className:"px-2 py-2",children:s.tanggal_izin}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:s.status=="i"?e.jsx("span",{className:"bg-yellow-200 px-4 py-1 text-yellow-600 font-semibold rounded-lg",children:"Izin"}):e.jsx("span",{className:"bg-red-300 px-4 py-1 text-red-600 font-semibold rounded-lg",children:"Sakit"})}),e.jsx("td",{className:"px-4 py-2 max-w-xs break-words whitespace-normal",children:s.keterangan}),e.jsx("td",{className:"px-4 py-2 ",children:s.status_approved?s.status_approved==0?e.jsx("span",{className:"bg-orange-300 px-4 py-1 rounded-lg text-orange-600 font-semibold",children:"pending"}):s.status_approved==1?e.jsx("span",{className:"bg-green-200 px-4 py-1 rounded-lg text-green-600 font-semibold",children:"Disetujui"}):e.jsx("span",{className:"bg-red-200 px-4 py-1 rounded-lg text-red-600 font-semibold",children:"Ditolak"}):e.jsx("span",{className:"bg-red-300 px-4 py-1 rounded-lg text-red-600 font-semibold",children:"Ditolak"})}),e.jsx("td",{children:s.file_path?e.jsx("a",{className:"bg-blue-800 text-white px-3 py-1 rounded-lg hover:bg-blue-900",href:route("izin.showfile",s.id),children:"Download"}):e.jsx("span",{})}),e.jsx("td",{className:"px-4 py-2 flex justify-center",children:s.status_approved==="1"||s.status_approved==="2"?e.jsx("button",{onClick:()=>i(s.id,"0"),className:"bg-red-500 px-4 py-1 text-white rounded-lg hover:bg-red-700",children:"Cancel"}):e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>i(s.id,"1"),className:"bg-green-500 px-4 py-1 text-white rounded-lg hover:bg-green-700 mr-2",children:["Setujui"," "]}),e.jsx("button",{onClick:()=>i(s.id,"2"),className:"bg-red-500 px-4 py-1 text-white rounded-lg hover:bg-red-700",children:"Tolak"})]})})]},s.id))})]})]})})})}export{w as default};
