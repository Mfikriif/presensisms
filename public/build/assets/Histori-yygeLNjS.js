import{r as n,j as e,b as j}from"./app-z_KT-xgj.js";import{M as y}from"./MainLayout-CduLXKi4.js";import w from"./GetHistori-BVteSHm3.js";import{D as k,k as m}from"./index-BmHCXPVD.js";function D({namabulan:x=[],tahun_awal:c=2022}){const d=new Date,b=d.getMonth()+1,u=d.getFullYear(),[r,g]=n.useState(b),[o,p]=n.useState(u),[t,s]=n.useState(""),[l,h]=n.useState(!1),f=async()=>{if(!r||!o){s("Pilih bulan dan tahun terlebih dahulu.");return}h(!0);try{const a=await j.post("/gethistori",{bulan:r,tahun:o});a.data.length===0?s("Tidak ada data untuk bulan dan tahun ini."):(s(a.data),m.success("Data berhasil ditampilkan!"))}catch(a){console.error("Error saat mengambil data:",a),s("Terjadi kesalahan saat mengambil data."),m.error("Gagal mengambil data. Silakan coba lagi.")}finally{h(!1)}};return e.jsx(y,{title:"Histori Absensi",children:e.jsxs("div",{className:"bg-gray-100 min-h-screen pb-10",children:[e.jsx(k,{position:"top-center",reverseOrder:!1}),e.jsxs("div",{className:"bg-blue-950 text-white flex items-center justify-between px-4 py-3 shadow-md",children:[e.jsxs("button",{onClick:()=>window.location.href="/dashboardop",className:"flex items-center text-white",children:[e.jsx("ion-icon",{name:"chevron-back-outline",className:"text-2xl"}),e.jsx("span",{className:"ml-2 text-sm",children:"Kembali"})]}),e.jsx("h1",{className:"text-lg font-semibold",children:"Histori Presensi"})]}),e.jsxs("div",{className:"p-6 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bulan",className:"block text-base font-semibold text-gray-800",children:"Bulan"}),e.jsxs("select",{id:"bulan",className:"mt-2 block w-full min-w-[150px] rounded-xl border-gray-300 shadow-md text-base p-3 bg-white focus:border-blue-600 focus:ring focus:ring-blue-300",value:r,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Bulan"}),x.map((a,i)=>e.jsx("option",{value:i+1,children:a},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tahun",className:"block text-base font-semibold text-gray-800",children:"Tahun"}),e.jsxs("select",{id:"tahun",className:"mt-2 block w-full min-w-[150px] rounded-xl border-gray-300 shadow-md text-base p-3 bg-white focus:border-blue-600 focus:ring focus:ring-blue-300",value:o,onChange:a=>p(a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Tahun"}),Array.from({length:u-c+1},(a,i)=>c+i).map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsx("button",{onClick:f,disabled:l,className:`mt-6 w-full px-5 py-3 text-white text-base font-semibold rounded-xl shadow-md ${l?"bg-gray-400":"bg-blue-950"} focus:ring focus:ring-blue-300`,children:l?"Memuat...":"Cari Data"})]}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{height:"calc(100vh - 200px)"},children:l?e.jsx("p",{className:"text-gray-500 text-sm italic text-center",children:"Memuat data..."}):Array.isArray(t)&&t.length>0?e.jsx(w,{histori:t}):e.jsx("p",{className:"text-gray-500 text-sm italic text-center",children:typeof t=="string"?t:"Tidak ada data yang ditampilkan."})})]})})}export{D as default};
